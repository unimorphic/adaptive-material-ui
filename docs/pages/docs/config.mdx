# Config

## Custom Adaptive Logic

`AdaptiveThemeProvider.adaptiveModeInfo` can be set if you want to use a different user agent
or completely control the adaptive logic yourself. The theme uses `AdaptiveModeContext` to pass
this info to the child components which can be used separately if needed.

### Different User Agent

#### Theme

```tsx pure
import { AdaptiveThemeProvider } from "adaptive-material-ui/theme/adaptiveThemeProvider";

<AdaptiveThemeProvider
  adaptiveModeInfo={{ userAgent: req.headers["user-agent"] }}
>
```

#### Context

```tsx pure
import { AdaptiveModeContext } from "adaptive-material-ui/adaptiveMode";

<AdaptiveModeContext.Provider
  value={{ userAgent: req.headers["user-agent"] }}
>
```

### Custom Logic

#### Theme

```tsx pure
import { AdaptiveThemeProvider } from "adaptive-material-ui/theme/adaptiveThemeProvider";

let mode = "android";
if (user.name === "personIdoNotLike") {
  mode = "desktop";
}

<AdaptiveThemeProvider adaptiveModeInfo={{ mode: mode }} >
```

#### Context

```tsx pure
import { AdaptiveModeContext } from "adaptive-material-ui/adaptiveMode";

let mode = "android";
if (user.name === "personIdoNotLike") {
  mode = "desktop";
}

<AdaptiveModeContext.Provider value={{ mode: mode }} >
```

### SSR

See the [example project](https://github.com/unimorphic/adaptive-material-ui/tree/master/examples/next-js)
using [Next.js](https://nextjs.org/)

## Enforce Adaptive Component Use

ESLint can be configured to warn when using MUI components that have Adaptive counterparts
by adding the following rule to your ESLint config file.
This will for example warn if the `<Button>` component is used instead of `<AdaptiveButton>`.

```tsx pure
import { warnNonAdaptiveComponents } from "adaptive-material-ui/eslintRule";

rules: {
  "no-restricted-syntax": ["warn", ...warnNonAdaptiveComponents()],
}
```

Specific components can be excluded by passing a list of MUI names into the `excludeComponents` option.

```tsx pure
import { warnNonAdaptiveComponents } from "adaptive-material-ui/eslintRule";

rules: {
  "no-restricted-syntax": [
    "warn",
    ...warnNonAdaptiveComponents({ excludeComponents: ["Button"] }),
  ],
}
```

## Minimizing Bundle Size

To [avoid barrel imports](https://mui.com/material-ui/guides/minimizing-bundle-size/#avoid-barrel-imports)
similar ESLint & VS Code settings can be configured as shown here.

### ESLint Config

```json
{
  "rules": {
    "no-restricted-imports": [
      "error",
      {
        "patterns": [{ "regex": "^@mui/[^/]+$" }, "adaptive-material-ui"]
      }
    ]
  }
}
```

### VS Code Setting

```json
{
  "typescript.preferences.autoImportSpecifierExcludeRegexes": [
    "^@mui/[^/]+$",
    "^adaptive-material-ui$"
  ]
}
```
