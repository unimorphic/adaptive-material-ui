import Links from "@/shared/links";

# Adaptive Progress

## Circular Progress

### Adaptiveness

- iOS: native animation

```tsx
import AdaptiveModeDemo from "@/shared/adaptiveModeDemo";
import { AdaptiveCircularProgress } from "adaptive-material-ui/components/circularProgress";

export default function () {
  return (
    <AdaptiveModeDemo>
      <AdaptiveCircularProgress />
    </AdaptiveModeDemo>
  );
}
```

### iOS Variations

```tsx
import AdaptiveModeDemo from "@/shared/adaptiveModeDemo";
import { DemoList, DemoListItem } from "@/shared/demoList";
import { AdaptiveCircularProgress } from "adaptive-material-ui/components/circularProgress";
import { useEffect, useState } from "react";

export default function () {
  const [progress, setProgress] = useState(0);

  useEffect(() => {
    const timer = window.setInterval(() => {
      setProgress((v) => (v >= 100 ? 0 : v + 12.5));
    }, 1000);

    return () => window.clearInterval(timer);
  }, []);

  return (
    <AdaptiveModeDemo adaptiveMode="ios">
      <DemoList>
        <DemoListItem title="Color">
          <AdaptiveCircularProgress color="inherit" />
          <AdaptiveCircularProgress color="primary" />
          <AdaptiveCircularProgress color="secondary" />
          <AdaptiveCircularProgress color="error" />
          <AdaptiveCircularProgress color="info" />
          <AdaptiveCircularProgress color="success" />
          <AdaptiveCircularProgress color="warning" />
        </DemoListItem>
        <DemoListItem title="Size">
          <AdaptiveCircularProgress size="30px" />
          <AdaptiveCircularProgress size={40} />
          <AdaptiveCircularProgress size="3rem" />
        </DemoListItem>
        <DemoListItem title="Determinate">
          <AdaptiveCircularProgress variant="determinate" value={progress} />
        </DemoListItem>
      </DemoList>
    </AdaptiveModeDemo>
  );
}
```

## Linear Progress

### Adaptiveness

- iOS: native styling

```tsx
import AdaptiveModeDemo from "@/shared/adaptiveModeDemo";
import { AdaptiveLinearProgress } from "adaptive-material-ui/components/linearProgress";

export default function () {
  return (
    <AdaptiveModeDemo>
      <AdaptiveLinearProgress />
    </AdaptiveModeDemo>
  );
}
```

### iOS Variations

```tsx
import AdaptiveModeDemo from "@/shared/adaptiveModeDemo";
import { DemoList, DemoListItem } from "@/shared/demoList";
import { AdaptiveLinearProgress } from "adaptive-material-ui/components/linearProgress";
import { useEffect, useState } from "react";

export default function () {
  const [progress, setProgress] = useState(0);
  const [buffer, setBuffer] = useState(10);

  useEffect(() => {
    let prevProgress = 0;
    let prevBuffer = 0;

    function updateProgress() {
      if (prevProgress === 100) {
        setProgress(0);
        setBuffer(10);
        prevProgress = 0;
        prevBuffer = 10;
      } else {
        setProgress(prevProgress + 1);

        if (prevBuffer < 100 && prevProgress % 5 === 0) {
          const newBuffer = prevBuffer + 1 + Math.random() * 10;
          setBuffer((prevBuffer = newBuffer > 100 ? 100 : newBuffer));
        }
        prevProgress = prevProgress + 1;
      }
    }

    const timer = window.setInterval(() => updateProgress(), 100);
    return () => window.clearInterval(timer);
  }, []);

  return (
    <AdaptiveModeDemo adaptiveMode="ios">
      <DemoList>
        <DemoListItem title="Color">
          <AdaptiveLinearProgress
            color="secondary"
            variant="determinate"
            value={25}
          />
        </DemoListItem>
        <DemoListItem title="Buffer">
          <AdaptiveLinearProgress
            variant="buffer"
            value={progress}
            valueBuffer={buffer}
          />
        </DemoListItem>
      </DemoList>
    </AdaptiveModeDemo>
  );
}
```

## API

### Circular Progress

[MUI Circular Progress API](https://mui.com/material-ui/api/circular-progress/) with the following changes:

- iOS: `disableShrink`, `enableTrackSlot`, & `thickness` properties are not used
- iOS: `size` defaults to `30`

### Linear Progress

[MUI Linear Progress API](https://mui.com/material-ui/api/linear-progress/)

## Links

<Links
  codeUrl={[
    "components/circularProgress/adaptiveCircularProgress.tsx",
    "components/linearProgress/adaptiveLinearProgress.tsx",
  ]}
  docsUrl="components/adaptiveProgress.mdx"
  mui={{ title: "Progress", url: "react-progress" }}
/>
