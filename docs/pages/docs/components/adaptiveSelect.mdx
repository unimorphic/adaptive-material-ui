import Links from "@/shared/links";

# Adaptive Select

## Adaptiveness

- Desktop: doesn't block interaction with other page elements when open
- Android & iOS: uses the native device select
- iOS: native styling

```tsx
import AdaptiveModeDemo from "@/shared/adaptiveModeDemo";
import {
  AdaptiveSelect,
  AdaptiveSelectItem,
} from "adaptive-material-ui/components/select";

export default function () {
  return (
    <AdaptiveModeDemo>
      <AdaptiveSelect defaultValue={1}>
        <AdaptiveSelectItem value={1}>One</AdaptiveSelectItem>
        <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
      </AdaptiveSelect>
    </AdaptiveModeDemo>
  );
}
```

## iOS Variations

```tsx
import AdaptiveModeDemo from "@/shared/adaptiveModeDemo";
import { DemoList, DemoListItem } from "@/shared/demoList";
import FormControl from "@mui/material/FormControl";
import InputLabel from "@mui/material/InputLabel";
import {
  AdaptiveSelect,
  AdaptiveSelectItem,
  AdaptiveSelectItemGroup,
} from "adaptive-material-ui/components/select";

export default function () {
  return (
    <AdaptiveModeDemo adaptiveMode="ios">
      <DemoList>
        <DemoListItem title="Variant">
          <AdaptiveSelect
            defaultValue={1}
            variant="standard"
            sx={{ width: 120 }}
          >
            <AdaptiveSelectItem value={1}>Standard</AdaptiveSelectItem>
            <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
          </AdaptiveSelect>
          <AdaptiveSelect
            defaultValue={1}
            variant="outlined"
            sx={{ width: 120 }}
          >
            <AdaptiveSelectItem value={1}>Outlined</AdaptiveSelectItem>
            <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
          </AdaptiveSelect>
          <AdaptiveSelect
            defaultValue={1}
            hiddenLabel
            variant="filled"
            sx={{ width: 120 }}
          >
            <AdaptiveSelectItem value={1}>Filled</AdaptiveSelectItem>
            <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
          </AdaptiveSelect>
        </DemoListItem>
        <DemoListItem title="Label">
          <FormControl sx={{ width: 120 }}>
            {/* https://mui.com/material-ui/react-select/#accessibility */}
            <InputLabel focused={false} htmlFor="label-select">
              Label
            </InputLabel>
            <AdaptiveSelect defaultValue={1} id="label-select" label="Label">
              <AdaptiveSelectItem value={1}>One</AdaptiveSelectItem>
              <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
            </AdaptiveSelect>
          </FormControl>
        </DemoListItem>
        <DemoListItem title="Multiple Values">
          <AdaptiveSelect multiple defaultValue={[1]}>
            <AdaptiveSelectItem value={1}>One</AdaptiveSelectItem>
            <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
            <AdaptiveSelectItem value={3}>Three</AdaptiveSelectItem>
          </AdaptiveSelect>
        </DemoListItem>
        <DemoListItem title="Grouping">
          <AdaptiveSelect defaultValue={1}>
            <AdaptiveSelectItem value={1}>One</AdaptiveSelectItem>
            <AdaptiveSelectItemGroup label="Category 1">
              <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
              <AdaptiveSelectItem value={3}>Three</AdaptiveSelectItem>
            </AdaptiveSelectItemGroup>
          </AdaptiveSelect>
        </DemoListItem>
      </DemoList>
    </AdaptiveModeDemo>
  );
}
```

## No Selected Value

To keep the native select behavior consistent when there isn't a selected value, a hidden `option` with a empty value is added by default.
The `disableNativeEmptyValue` prop can be used to disable this behavior.

```tsx
import AdaptiveModeDemo from "@/shared/adaptiveModeDemo";
import { DemoList, DemoListItem } from "@/shared/demoList";
import {
  AdaptiveSelect,
  AdaptiveSelectItem,
} from "adaptive-material-ui/components/select";

export default function () {
  return (
    <AdaptiveModeDemo adaptiveMode="ios">
      <DemoList>
        <DemoListItem title="Default">
          <AdaptiveSelect defaultValue="">
            <AdaptiveSelectItem value={1}>One</AdaptiveSelectItem>
            <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
          </AdaptiveSelect>
        </DemoListItem>
        <DemoListItem title="Disabled">
          <AdaptiveSelect defaultValue="" disableNativeEmptyValue>
            <AdaptiveSelectItem value={1}>One</AdaptiveSelectItem>
            <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
          </AdaptiveSelect>
        </DemoListItem>
      </DemoList>
    </AdaptiveModeDemo>
  );
}
```

## Non String Values

Native selects only support string values. Remember to parse the value or always use string values.

```tsx
import AdaptiveModeDemo from "@/shared/adaptiveModeDemo";
import { SelectChangeEvent } from "@mui/material/Select";
import {
  AdaptiveSelect,
  AdaptiveSelectItem,
} from "adaptive-material-ui/components/select";
import { useState } from "react";

export default function () {
  const [selectedValueType, setSelectedValueType] = useState<string | null>(
    null,
  );

  function onChange(event: SelectChangeEvent) {
    setSelectedValueType(typeof event.target.value);
  }

  return (
    <AdaptiveModeDemo>
      <AdaptiveSelect defaultValue="" onChange={onChange} sx={{ width: 100 }}>
        <AdaptiveSelectItem value={1}>One</AdaptiveSelectItem>
        <AdaptiveSelectItem value={2}>Two</AdaptiveSelectItem>
      </AdaptiveSelect>
      <div>Selected value type: {selectedValueType}</div>
    </AdaptiveModeDemo>
  );
}
```

## Native Item Content Limitations

Note the `option` element [browser support](https://caniuse.com/?search=base-select) &
[React support](https://github.com/facebook/react/issues/33038) for content other than text is currently limited
[MDN](https://developer.mozilla.org/en-US/docs/Learn_web_development/Extensions/Forms/Customizable_select).

## API

[MUI Select API](https://mui.com/material-ui/api/select/) with the following changes:

- `input` defaults to `AdaptiveInput`, `AdaptiveFilledInput`, or `AdaptiveOutlinedInput`
- Desktop: `MenuProps.disableScrollLock` defaults to `true`
- Desktop: `MenuProps.slots.root` defaults to `ModalNonBlocking`
- Android & iOS: `native` defaults to `true`

### disableNativeEmptyValue

Removes the hidden empty value native `option`

- Type: `boolean`
- Default: `false`

### AdaptiveSelectItem

[MUI MenuItem API](https://mui.com/material-ui/api/menu-item/) with the following changes:

- Props not applicable to a `<option>` element are ignored on Android & iOS.
  See the [source](https://github.com/unimorphic/adaptive-material-ui/blob/c8a426dc97f18688aaa30168fa495101529a45ba/src/components/select/selectNative.tsx#L18)
  for the full list of ignored props.

### AdaptiveSelectItemGroup

[MUI ListSubheader API](https://mui.com/material-ui/api/list-subheader/) with the following changes:

- Props not applicable to a `<optgroup>` element are ignored on Android & iOS.
  See the [source](https://github.com/unimorphic/adaptive-material-ui/blob/c8a426dc97f18688aaa30168fa495101529a45ba/src/components/select/selectNative.tsx#L58)
  for the full list of ignored props.

## Links

<Links
  codeUrl="components/select/adaptiveSelect.tsx"
  docsUrl="components/adaptiveSelect.mdx"
  mui={{ title: "Select", url: "react-select" }}
/>
